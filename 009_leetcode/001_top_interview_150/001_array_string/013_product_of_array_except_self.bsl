// 238. Произведение массива, кроме самого себя

// Учитывая целочисленный массив nums, верните массив answer, в котором answer[i] равно произведению всех элементов массива nums, кроме nums[i].

// Произведение любого префикса или суффикса массива nums гарантированно поместится в 32-битное целое число.

// Вы должны написать алгоритм, который работает за время O(n) и не использует операцию деления.

// Пример 1:
// Входные данные: nums = [1, 2, 3, 4]
// [0, 0, 0, 0]
// [1, 1, 2, 6] [24, 12, 4, 1]
// [24, 12, 8, 6]
// Выходные данные: [24, 12, 8, 6]

// Пример 2:
// Входные данные: nums = [-1, 1, 0, -3, 3]
// [0, 0, 0, 0, 0]
// [1, -1, -1, 0, 0] [0, 0, -9, 3, 1] 
// [0, 0, 9, 0, 0]
// Выходные данные: [0, 0, 9, 0, 0]
 
// Ограничения:
// 2 <= nums.длина <= 10^5
// -30 <= числа[i] <= 30
// Ввод генерируется таким образом, что ответ[i] гарантированно поместится в 32-разрядное целое число.

// Функция для вычисления произведения элементов массива, исключая текущий элемент
Функция ПроизведениеКромеСебя(Массив) Экспорт
    // Создаем список для результата
    Результат = Новый Массив;

    // Инициализируем переменную для хранения произведения элементов слева
    ПроизведениеСлева = 1;

    // Шаг 1: Заполняем результат произведениями всех элементов слева от текущего индекса
    Для Индекс = 0 По Массив.Количество() - 1 Цикл
        Результат.Добавить(ПроизведениеСлева);
        ПроизведениеСлева = ПроизведениеСлева * Массив[Индекс];
    КонецЦикла;

    // Инициализируем переменную для хранения произведения элементов справа
    ПроизведениеСправа = 1;

    // Шаг 2: Обновляем результат произведениями всех элементов справа от текущего индекса
    Для Индекс = 0 По Массив.Количество() - 1 Цикл
		ОбратныйИндекс = Массив.Количество() - 1 - Индекс;
        Результат[ОбратныйИндекс] = Результат[ОбратныйИндекс] * ПроизведениеСправа;
        ПроизведениеСправа = ПроизведениеСправа * Массив[ОбратныйИндекс];
    КонецЦикла;

    Возврат Результат;
КонецФункции

// Пример использования
Процедура ПриНачалеРаботыСистемы()
    // Пример 1
    Массив1 = Новый Массив;
	Массив1 = СтрРазделить("1, 2, 3, 4", ",");
    Результат2 = ПроизведениеКромеСебя(Массив1);
	Сообщить(СтрСоединить(Результат1, ","));

	// Пример 2
	Массив2 = Новый Массив;
	Массив2 = СтрРазделить("-1, 1, 0, -3, 3", ",");
	Результат2 = ПроизведениеКромеСебя(Массив2);
	Сообщить(СтрСоединить(Результат2, ","));
КонецПроцедуры